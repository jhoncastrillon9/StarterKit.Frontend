<div class="chatbot-container">
  <div class="chat-header">
    <span class="chat-title">Chatbot</span>
    <button class="clear-btn" (click)="openConfirmationModal()" title="Borrar conversaciÃ³n">
      ğŸ—‘
    </button>
  </div>

  <div class="chat-messages" #messagesContainer>
    <!-- Mensaje cuando no hay historial -->
    <div *ngIf="messages.length === 0 && !isBotTyping" class="empty-state">
      <p>ğŸ‘‹ No hay mensajes. Â¡Comienza la conversaciÃ³n!</p>
    </div>

    <!-- Mensajes del chat -->
    <div *ngFor="let msg of messages" class="chat-message" [ngClass]="msg.sender">
      <div *ngIf="msg.sender === 'user'" class="bubble user-bubble">
        {{ msg.content }}
      </div>
      <!-- CORRECCIÃ“N: Aceptar 'bot' O 'assistant' -->
      <div *ngIf="msg.sender === 'bot' || msg.sender === 'assistant'" class="bubble bot-bubble">
        {{ msg.content }}
      </div>
    </div>

    <!-- Indicador de escritura -->
    <div *ngIf="isBotTyping" class="typing-indicator">
      <span class="dot"></span><span class="dot"></span><span class="dot"></span>
      <span class="typing-text">El bot estÃ¡ escribiendo...</span>
    </div>
  </div>

  <div class="chat-input">
    <input 
      [(ngModel)]="message" 
      (keyup.enter)="sendMessage()" 
      placeholder="Escribe un mensaje..."
      [disabled]="isBotTyping" />
    <button (click)="sendMessage()" [disabled]="!message.trim() || isBotTyping">
      Enviar
    </button>
  </div>
  <app-confirmation-modal
    #confirmationModal
    [title]="'Confirmar'"
    [messageModal]="confirmationMessage"
    [isConfirmation]="true"
    [titleButtonComfimationYes]="'SÃ­, borrar'"
    (confirmAction)="onConfirmDelete()">
  </app-confirmation-modal>
</div>