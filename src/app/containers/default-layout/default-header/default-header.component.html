<!-- Header Principal Moderno -->
<div class="header-modern-container">
  <c-container [fluid]="true" class="header-inner">
    <!-- Left Section: Menu Toggle & Navigation -->
    <div class="header-left-section">
      <button
        toggle="visible"
        cHeaderToggler
        [cSidebarToggle]="sidebarId"
        class="menu-toggle-btn"
        aria-label="Toggle sidebar"
      >
        <i class="fas fa-bars"></i>
      </button>
      
      <nav class="header-nav-links d-none d-lg-flex">
        <a routerLink="/dashboard" routerLinkActive="active" class="nav-link-modern">
          <i class="fas fa-home"></i>
          <span>Inicio</span>
        </a>
      </nav>
    </div>

    <!-- Right Section: Actions & User -->
    <div class="header-right-section">
      <!-- Help Button -->
      <a href="https://wa.me/573170715074?text=Hola%20Constructor%20necesito%20ayuda%20con%20mi%20cotizaci%C3%B3n"
         target="_blank"
         class="help-btn">
        <i class="fab fa-whatsapp"></i>
        <span class="d-none d-md-inline">¡Ayuda!</span>
      </a>

      <!-- User Greeting -->
      <div class="user-greeting d-none d-lg-flex">
        <i class="fas fa-hand-wave"></i>
        <span>¡Hola, {{ userEmail }}!</span>
      </div>

      <!-- User Dropdown -->
      <ng-container *ngTemplateOutlet="userDropdown"></ng-container>
    </div>
  </c-container>
</div>

<ng-template #userDropdown>
  <div class="user-dropdown-modern">
    <c-dropdown [popperOptions]="{ placement: 'bottom-end' }" variant="nav-item">
      <button [caret]="false" cDropdownToggle class="avatar-btn" aria-label="Open user menu">
        <div class="avatar-wrapper">
          <img src="./assets/img/avatars/3d_1.png" alt="User avatar" class="avatar-img" />
          <span class="status-indicator"></span>
        </div>
      </button>
      <ul cDropdownMenu class="dropdown-menu-modern">
        <!-- User Info Header -->
        <li class="dropdown-header-modern">
          <div class="user-info">
            <img src="./assets/img/avatars/3d_1.png" alt="User" class="header-avatar" />
            <div class="user-details">
              <span class="user-name">{{ userEmail }}</span>
              <span class="user-role">Constructor</span>
            </div>
          </div>
        </li>
        
        <li class="dropdown-divider-modern"></li>

        <!-- Account Section -->
        <li class="dropdown-section-title">
          <i class="fas fa-user-circle"></i>
          <span>Cuenta</span>
        </li>

        <li>
          <a cDropdownItem routerLink="/apps/email/inbox" class="dropdown-item-modern">
            <div class="item-icon">
              <i class="fas fa-envelope"></i>
            </div>
            <span class="item-text">Mensajes</span>
            <span class="item-badge success">0</span>
          </a>
        </li>

        <li class="dropdown-divider-modern"></li>

        <!-- Settings Section -->
        <li class="dropdown-section-title">
          <i class="fas fa-cog"></i>
          <span>Configuraciones</span>
        </li>

        <li>
          <a routerLink="/profile/me" cDropdownItem class="dropdown-item-modern">
            <div class="item-icon">
              <i class="fas fa-user"></i>
            </div>
            <span class="item-text">Mi Perfil</span>
          </a>
        </li>

        <li>
          <a routerLink="./configurations/companyConfig" cDropdownItem class="dropdown-item-modern">
            <div class="item-icon">
              <i class="fas fa-building"></i>
            </div>
            <span class="item-text">Empresa</span>
          </a>
        </li>

        <li class="dropdown-divider-modern"></li>

        <!-- Logout -->
        <li>
          <a (click)="signoff()" cDropdownItem class="dropdown-item-modern logout-item">
            <div class="item-icon logout">
              <i class="fas fa-sign-out-alt"></i>
            </div>
            <span class="item-text">Cerrar Sesión</span>
          </a>
        </li>
      </ul>
    </c-dropdown>
  </div>
</ng-template>

