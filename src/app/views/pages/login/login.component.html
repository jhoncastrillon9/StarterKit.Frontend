<div class="auth-page-container">
  <div class="auth-card-wrapper-wide">
    <!-- Logo Section -->
    <div class="auth-logo-section">
      <img
        src="../../../../assets/img/logos/logocotiza.png"
        alt="Logo Cotiza"
        class="auth-logo"
      />
    </div>

    <!-- Auth Card -->
    <div class="auth-card">
      <div class="auth-login-grid">
        <!-- Login Form Section -->
        <div class="auth-login-form">
          <div class="auth-card-header">
            <div class="auth-icon">
              <svg cIcon name="cilUser"></svg>
            </div>
            <h1 class="auth-title">¡Bienvenido!</h1>
            <p class="auth-subtitle">Inicia sesión para acceder a tu cuenta</p>
          </div>

          <div class="auth-card-body">
            <form [formGroup]="loginForm" (ngSubmit)="onLogin()">
              <!-- Email Field -->
              <div class="auth-form-group">
                <label class="auth-label">
                  Correo electrónico
                  <span class="required-star">*</span>
                </label>
                <div class="auth-input-wrapper icon-left">
                  <input
                    type="email"
                    class="auth-input"
                    formControlName="email"
                    placeholder="ejemplo@correo.com"
                    autocomplete="username"
                    [ngClass]="{'is-invalid': loginForm.get('email')?.invalid && (loginForm.get('email')?.touched || loginForm.get('email')?.dirty)}"
                  />
                  <span class="auth-input-icon">
                    <svg cIcon name="cilEnvelopeClosed"></svg>
                  </span>
                </div>
                <div
                  *ngIf="loginForm.get('email')?.invalid && (loginForm.get('email')?.touched || loginForm.get('email')?.dirty)"
                  class="auth-error-message"
                >
                  <svg cIcon name="cilWarning"></svg>
                  Por favor, ingresa un email válido.
                </div>
              </div>

              <!-- Password Field -->
              <div class="auth-form-group">
                <label class="auth-label">
                  Contraseña
                  <span class="required-star">*</span>
                </label>
                <div class="auth-input-wrapper icon-left">
                  <input
                    type="password"
                    class="auth-input"
                    formControlName="password"
                    placeholder="Ingresa tu contraseña"
                    autocomplete="current-password"
                    [ngClass]="{'is-invalid': loginForm.get('password')?.invalid && (loginForm.get('password')?.touched || loginForm.get('password')?.dirty)}"
                  />
                  <span class="auth-input-icon">
                    <svg cIcon name="cilLockLocked"></svg>
                  </span>
                </div>
                <div
                  *ngIf="loginForm.get('password')?.invalid && (loginForm.get('password')?.touched || loginForm.get('password')?.dirty)"
                  class="auth-error-message"
                >
                  <svg cIcon name="cilWarning"></svg>
                  La contraseña es obligatoria.
                </div>
              </div>

              <!-- Forgot Password Link -->
              <div class="text-end mb-3">
                <a routerLink="/recoveryPassword" class="auth-link">
                  ¿Olvidaste tu contraseña?
                </a>
              </div>

              <!-- Login Button -->
              <button type="submit" class="auth-btn-primary">
                <svg cIcon name="cilArrowRight" class="me-2"></svg>
                Iniciar sesión
              </button>

              <!-- Mobile Register Button -->
              <div class="auth-mobile-register">
                <button type="button" class="auth-btn-secondary" routerLink="/register">
                  ¿No tienes cuenta? ¡Regístrate!
                </button>
              </div>
            </form>
          </div>

          <!-- Footer -->
          <div class="auth-card-footer">
            <p class="auth-footer-text">
              Versión: 17-ENERO-2026
            </p>
          </div>
        </div>

        <!-- Register Panel (Desktop) -->
        <div class="auth-register-panel">
          <div class="register-panel-icon">
            <svg cIcon name="cilUserPlus"></svg>
          </div>
          <h2 class="register-panel-title">¡Únete a nosotros!</h2>
          <p class="register-panel-text">
            ¡Únete a la plataforma líder para constructores!<br />
            Crea cotizaciones GRATIS, consulta análisis de precios unitarios APU, facturas y mucho más.
          </p>
          <button type="button" class="auth-btn-yellow" routerLink="/register">
            ¡Regístrate Ahora!
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal de confirmación -->
<app-confirmation-modal 
  #confirmationModal  
  [messageModal]="messageModal"
  [title]="title"
  [isModalError]="isModalError"
  [alignment]="'top'">
</app-confirmation-modal>

<ngx-spinner 
  bdColor="rgba(0, 0, 0, 0.8)" 
  size="medium" 
  color="#fff" 
  type="ball-clip-rotate-multiple" 
  [fullScreen]="true">
  <p style="color: white; margin-top: 1rem;">Cargando...</p>
</ngx-spinner>
