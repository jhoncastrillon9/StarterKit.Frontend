<div class="auth-page-container">
  <div class="auth-card-wrapper" style="max-width: 520px;">
    <!-- Logo Section -->
    <div class="auth-logo-section">
      <img
        src="../../../../assets/img/logos/logocotiza.png"
        alt="Logo Cotiza"
        class="auth-logo"
      />
    </div>

    <!-- Auth Card -->
    <div class="auth-card">
      <div class="auth-card-header">
        <div class="auth-icon">
          <svg cIcon name="cilUserPlus"></svg>
        </div>
        <h1 class="auth-title">Crear Cuenta</h1>
        <p class="auth-subtitle">Únete a la plataforma líder para constructores</p>
      </div>

      <div class="auth-card-body">
        <form [formGroup]="registerForm" (ngSubmit)="onRegister()">
          <!-- Company Name Field -->
          <div class="auth-form-group">
            <label class="auth-label">
              Nombre de la Empresa
              <span class="required-star">*</span>
            </label>
            <div class="auth-input-wrapper icon-left">
              <input
                type="text"
                class="auth-input"
                formControlName="companyName"
                placeholder="Nombre de tu empresa"
                autocomplete="organization"
                [ngClass]="{'is-invalid': registerForm.get('companyName')?.invalid && (registerForm.get('companyName')?.touched || registerForm.get('companyName')?.dirty)}"
              />
              <span class="auth-input-icon">
                <svg cIcon name="cilBuilding"></svg>
              </span>
            </div>
            <div
              *ngIf="registerForm.get('companyName')?.invalid && (registerForm.get('companyName')?.touched || registerForm.get('companyName')?.dirty)"
              class="auth-error-message"
            >
              <svg cIcon name="cilWarning"></svg>
              El nombre de la empresa es obligatorio.
            </div>
          </div>

          <!-- Email Field -->
          <div class="auth-form-group">
            <label class="auth-label">
              Correo electrónico
              <span class="required-star">*</span>
            </label>
            <div class="auth-input-wrapper icon-left">
              <input
                type="email"
                class="auth-input"
                formControlName="email"
                placeholder="ejemplo@correo.com"
                autocomplete="email"
                [ngClass]="{'is-invalid': registerForm.get('email')?.invalid && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty)}"
              />
              <span class="auth-input-icon">
                <svg cIcon name="cilEnvelopeClosed"></svg>
              </span>
            </div>
            <div
              *ngIf="registerForm.get('email')?.invalid && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty)"
              class="auth-error-message"
            >
              <svg cIcon name="cilWarning"></svg>
              Por favor, ingresa un email válido.
            </div>
          </div>

          <!-- Password Field -->
          <div class="auth-form-group">
            <label class="auth-label">
              Contraseña
              <span class="required-star">*</span>
            </label>
            <div class="auth-input-wrapper icon-left">
              <input
                type="password"
                class="auth-input"
                formControlName="password"
                placeholder="Crea una contraseña segura"
                autocomplete="new-password"
                [ngClass]="{'is-invalid': registerForm.get('password')?.errors?.['required'] && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty)}"
              />
              <span class="auth-input-icon">
                <svg cIcon name="cilLockLocked"></svg>
              </span>
            </div>
            <div
              *ngIf="registerForm.get('password')?.errors?.['required'] && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty)"
              class="auth-error-message"
            >
              <svg cIcon name="cilWarning"></svg>
              La contraseña es obligatoria.
            </div>
          </div>

          <!-- Confirm Password Field -->
          <div class="auth-form-group">
            <label class="auth-label">
              Confirmar Contraseña
              <span class="required-star">*</span>
            </label>
            <div class="auth-input-wrapper icon-left">
              <input
                type="password"
                class="auth-input"
                formControlName="passwordconfirmation"
                placeholder="Repite tu contraseña"
                autocomplete="new-password"
                [ngClass]="{'is-invalid': registerForm.get('passwordconfirmation')?.invalid && (registerForm.get('passwordconfirmation')?.touched || registerForm.get('passwordconfirmation')?.dirty)}"
              />
              <span class="auth-input-icon">
                <svg cIcon name="cilLockUnlocked"></svg>
              </span>
            </div>
            <div
              *ngIf="registerForm.get('passwordconfirmation')?.invalid && (registerForm.get('passwordconfirmation')?.touched || registerForm.get('passwordconfirmation')?.dirty)"
              class="auth-error-message"
            >
              <svg cIcon name="cilWarning"></svg>
              Las contraseñas no coinciden.
            </div>
          </div>

          <!-- Benefits List -->
          <div class="auth-benefits mb-4">
            <div class="benefit-item">
              <svg cIcon name="cilCheckCircle" class="text-success me-2"></svg>
              <small>Cotizaciones ilimitadas GRATIS</small>
            </div>
            <div class="benefit-item">
              <svg cIcon name="cilCheckCircle" class="text-success me-2"></svg>
              <small>Análisis de precios unitarios (APU)</small>
            </div>
            <div class="benefit-item">
              <svg cIcon name="cilCheckCircle" class="text-success me-2"></svg>
              <small>Gestión de facturas y reportes</small>
            </div>
          </div>

          <!-- Buttons -->
          <div class="auth-buttons-row">
            <a routerLink="/login" class="auth-btn-secondary text-center text-decoration-none d-flex align-items-center justify-content-center">
              <svg cIcon name="cilArrowLeft" class="me-2"></svg>
              Regresar
            </a>
            <button type="submit" class="auth-btn-primary">
              <svg cIcon name="cilUserPlus" class="me-2"></svg>
              ¡Crear Cuenta!
            </button>
          </div>
        </form>
      </div>

      <div class="auth-card-footer">
        <p class="auth-footer-text">
          ¿Ya tienes una cuenta? <a routerLink="/login">Inicia sesión</a>
        </p>
      </div>
    </div>
  </div>
</div>

<!-- Modal de confirmación -->
<app-confirmation-modal
  #confirmationModal
  [messageModal]="messageModal"
  [title]="title"
  [isModalError]="isModalError"
  [alignment]="'top'"
>
</app-confirmation-modal>

<ngx-spinner
  bdColor="rgba(0, 0, 0, 0.8)"
  size="medium"
  color="#fff"
  type="ball-clip-rotate-multiple"
  [fullScreen]="true">
  <p style="color: white; margin-top: 1rem;">Cargando...</p>
</ngx-spinner>
